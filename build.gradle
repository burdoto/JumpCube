apply plugin: 'java'

group 'de.kaleidox'
version '0.1.4-SNAPSHOT'

ext {
    apiLevel = "1.15.2"
}

sourceCompatibility = 1.8
targetCompatibility = 1.8

repositories.jcenter()

compileJava {
    options.encoding = "UTF-8"
}

processResources {
    from(sourceSets.main.resources) {
        expand project.properties
    }
}

jar.baseName "$rootProject.name-mc$apiLevel"

task testPlugin(type: Copy, dependsOn: ['deleteTestPlugin', 'jar']) {
    from tasks.findByName('jar').outputs.files.singleFile
    into file("test/plugins/")
    rename { String filename ->
        return filename.contains(rootProject.name) ? "${rootProject.name}.jar" : filename
    }
}

task deleteTestPlugin(type: Delete) {
    delete "test/plugins/${rootProject.name}.jar"
}

dependencies {
    compileOnly fileTree("libs")

    compileOnly 'org.jetbrains:annotations:20.0.0'
}
